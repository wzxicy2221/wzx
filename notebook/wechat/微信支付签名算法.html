<html>
<head>
  <title>微信支付签名算法</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (zh-CN, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="314"/>
<h1>微信支付签名算法</h1>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">关于签名的算法，api提供的原文是：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"></p><h2 style="margin: 0px; padding: 0px; text-align: left; widows: 1; font-size: 14px; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', 'Hiragino Sans GB', 'Microsoft YaHei', 微软雅黑, 黑体, Arial, sans-serif; line-height: 22.3999996185303px; background-color: rgb(255, 255, 255);"><a name="t0" style="color: rgb(255, 153, 0);"></a></h2><h2 style="margin: 0px; padding: 0px; font-family: Arial; text-align: left; widows: 1; font-size: 14px; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><a name="t1" style="color: rgb(255, 153, 0);"></a><span style="font-family: SimHei;">1.签名算法</span></h2><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">签名生成的通用步骤如下：</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">第一步，设所有发送或者接收到的数据为集合M，将集合M内非空参数值的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1&amp;key2=value2…）拼接成字符串stringA。</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">特别注意以下重要规则：</span></p><ol style="font-family: Arial; font-size: 14px; text-align: left; widows: 1; margin: 0px; padding: 0px; list-style: none; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><li style="margin: 0px; padding: 0px;"><span style="font-family: SimHei;">　◆　参数名ASCII码从小到大排序（字典序）；</span></li><li style="margin: 0px; padding: 0px;"><span style="font-family: SimHei;">　◆　如果参数的值为空不参与签名；</span></li><li style="margin: 0px; padding: 0px;"><span style="font-family: SimHei;">　◆　参数名区分大小写；</span></li><li style="margin: 0px; padding: 0px;"><span style="font-family: SimHei;">　◆　验证调用返回或微信主动通知签名时，传送的sign参数不参与签名，将生成的签名与该sign值作校验。</span></li><li style="margin: 0px; padding: 0px;"><span style="font-family: SimHei;">　◆　微信接口可能增加字段，验证签名时必须支持增加的扩展字段</span></li></ol><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">第二步，在stringA最后拼接上key=(API密钥的值)得到stringSignTemp字符串，并对stringSignTemp进行MD5运算，再将得到的字符串所有字符转换为大写，得到sign值signValue。</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">举例：</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">假设传送的参数如下：</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">appid： wxd930ea5d5a258f4f</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">mch_id： 10000100</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">device_info： 1000</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">body： test</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">nonce_str： ibuaiVcKdpRxkhJA</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">第一步：对参数按照key=value的格式，并按照参数名ASCII字典序排序如下：</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">stringA=&quot;appid=wxd930ea5d5a258f4f&amp;body=test&amp;device_info=1000&amp;mch_id=10000100&amp;nonce_str=ibuaiVcKdpRxkhJA&quot;;</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">第二步：拼接API密钥：</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">stringSignTemp=&quot;stringA&amp;key=192006250b4c09247ec02edce69f6a2d&quot;</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-family: Arial; font-size: 14px; text-align: left; widows: 1; line-height: 22.3999996185303px; color: rgb(34, 34, 34); background-color: rgb(255, 255, 255);"><span style="font-family: SimHei;">sign=MD5(stringSignTemp).toUpperCase()=&quot;9A0A8659F005D6984697E2CA0A9CF3B7&quot;</span></p><p style="margin: 0px; padding: 10px 0px 4px; font-size: 14px; text-align: left; widows: 1; color: rgb(34, 34, 34); font-family: 'Helvetica Neue', 'Hiragino Sans GB', 'Microsoft YaHei', 微软雅黑, 黑体, Arial, sans-serif; line-height: 22.3999996185303px; background-color: rgb(255, 255, 255);"></p><br style="font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"/><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">网友的整理：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><img src="微信支付签名算法_files/Image.jpg" type="image/jpeg" border="1" style="cursor: default;cursor: default;"/><br/></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">ok，根据这个我们来尝试一下看能够根据提供的参数得到这个结果【<span style="color: rgb(34, 34, 34); font-family: 'Helvetica Neue', 'Hiragino Sans GB', 'Microsoft YaHei', 微软雅黑, 黑体, Arial, sans-serif; line-height: 22.3999996185303px;">9A0A8659F005D6984697E2CA0A9CF3B7</span>】！！！！</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><br/></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">关于按照ASCII排序这里用到了(SortedMap)，我的上一篇blog说过的，有兴趣自己去看看</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><br/></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">关键代码Set es = parameters.entrySet();//所有参与传参的参数按照accsii排序（升序）</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><br/></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><br/></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">生成MD5的时候，需要统一编码，这里微信api要求是UTF-8</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"><br/></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">相关代码如下：</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">【MD5Util】</p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"></p><div style="font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px; width: 936.53125px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; line-height: 26px; widows: 1; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><b>[java]</b> <a href="http://blog.csdn.net/xb12369/article/details/45716665#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-color: inherit; background-position: 0% 0%; background-repeat: no-repeat no-repeat;" title="view plain">view plain</a><a href="http://blog.csdn.net/xb12369/article/details/45716665#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-color: inherit; background-position: 0% 0%; background-repeat: no-repeat no-repeat;" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style-position: initial; list-style-image: initial; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> String byteArrayToHexString(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">byte</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> b[]) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        StringBuffer resultSb = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> StringBuffer();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">for</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> (</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> i = </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">; i &lt; b.length; i++)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            resultSb.append(byteToHexString(b[i]));  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> resultSb.toString();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> String byteToHexString(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">byte</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> b) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> n = b;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> (n &lt; </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">0</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            n += <span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">256</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> d1 = n / </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">16</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">int</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> d2 = n % </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">16</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> hexDigits[d1] + hexDigits[d2];  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> String MD5Encode(String origin, String charsetname) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String resultString = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">try</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            resultString = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> String(origin);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            MessageDigest md = MessageDigest.getInstance(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;MD5&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> (charsetname == </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> || </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">.equals(charsetname))  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                resultString = byteArrayToHexString(md.digest(resultString  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        .getBytes()));  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                resultString = byteArrayToHexString(md.digest(resultString  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                        .getBytes(charsetname)));  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        } <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">catch</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> (Exception exception) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> resultString;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">final</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> String hexDigits[] = { </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;1&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;2&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;3&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;4&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;5&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">,  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;6&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;7&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;8&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;9&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;a&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;b&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;c&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;d&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;e&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;f&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> };  </span></span></li></ol></div><br style="font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"/><span style="font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">【PayTest】</span><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"></p><div style="font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px; width: 936.53125px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; line-height: 26px; widows: 1; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><b>[java]</b> <a href="http://blog.csdn.net/xb12369/article/details/45716665#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-color: inherit; background-position: 0% 0%; background-repeat: no-repeat no-repeat;" title="view plain">view plain</a><a href="http://blog.csdn.net/xb12369/article/details/45716665#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-color: inherit; background-position: 0% 0%; background-repeat: no-repeat no-repeat;" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style-position: initial; list-style-image: initial; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//http://mch.weixin.qq.com/wiki/doc/api/index.php?chapter=4_3</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">private</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> String Key = </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;192006250b4c09247ec02edce69f6a2d&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">/**</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">     * @param args</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">     */</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">void</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> main(String[] args) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        System.out.println(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;&gt;&gt;&gt;模拟微信支付&lt;&lt;&lt;&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        System.out.println(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;==========华丽的分隔符==========&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//微信api提供的参数</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String appid = <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;wxd930ea5d5a258f4f&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String mch_id = <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;10000100&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String device_info = <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;1000&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String body = <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;test&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String nonce_str = <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;ibuaiVcKdpRxkhJA&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">          </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        SortedMap&lt;Object,Object&gt; parameters = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> TreeMap&lt;Object,Object&gt;();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        parameters.put(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;appid&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, appid);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        parameters.put(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;mch_id&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, mch_id);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        parameters.put(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;device_info&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, device_info);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        parameters.put(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;body&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, body);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        parameters.put(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;nonce_str&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">, nonce_str);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">          </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String characterEncoding = <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;UTF-8&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String weixinApiSign = <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;9A0A8659F005D6984697E2CA0A9CF3B7&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        System.out.println(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;微信的签名是：&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> + weixinApiSign);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String mySign = createSign(characterEncoding,parameters);  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        System.out.println(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;我     的签名是：&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">+mySign);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">          </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">(weixinApiSign.equals(mySign)){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            System.out.println(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;恭喜你成功了~&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">else</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">{  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            System.out.println(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;注定了你是个失败者~&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">          </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String userAgent = <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;Mozilla/5.0(iphone;CPU iphone OS 5_1_1 like Mac OS X) AppleWebKit/534.46(KHTML,like Geocko) Mobile/9B206 MicroMessenger/5.0&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">          </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">char</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> agent = userAgent.charAt(userAgent.indexOf(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;MicroMessenger&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">)+</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">15</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">          </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        System.out.println(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;微信的版本号：&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">+</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> String(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">char</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">[]{agent}));  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">/**</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">     * 微信支付签名算法sign</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">     * @param characterEncoding</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">     * @param parameters</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">     * @return</span> </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">     */</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(100, 100, 100); background-color: inherit;">@SuppressWarnings</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">(</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;unchecked&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">)  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">public</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> </span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">static</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> String createSign(String characterEncoding,SortedMap&lt;Object,Object&gt; parameters){  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        StringBuffer sb = <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">new</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> StringBuffer();  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Set es = parameters.entrySet();<span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 130, 0); background-color: inherit;">//所有参与传参的参数按照accsii排序（升序）</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        Iterator it = es.iterator();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">while</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">(it.hasNext()) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Map.Entry entry = (Map.Entry)it.next();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            String k = (String)entry.getKey();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            Object v = entry.getValue();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">if</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">(</span><span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">null</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> != v &amp;&amp; !</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">.equals(v)   </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                    &amp;&amp; !<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;sign&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">.equals(k) &amp;&amp; !</span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;key&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">.equals(k)) {  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">                sb.append(k + <span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;=&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> + v + </span><span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;&amp;&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">            }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        }  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        sb.append(<span style="margin: 0px; padding: 0px; border: none; color: blue; background-color: inherit;">&quot;key=&quot;</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> + Key);  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        String sign = MD5Util.MD5Encode(sb.toString(), characterEncoding).toUpperCase();  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">        <span style="margin: 0px; padding: 0px; border: none; color: rgb(0, 102, 153); font-weight: bold; background-color: inherit;">return</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;"> sign;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">    }  </span></li></ol></div><br style="font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"/><span style="font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);">【最终结果】</span><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"></p><p style="margin: 0px; padding: 0px; font-family: Arial; font-size: 14px; line-height: 26px; text-align: left; widows: 1; background-color: rgb(255, 255, 255);"></p><div style="font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px; width: 936.53125px; overflow: auto; padding-top: 1px; text-align: left; margin: 18px 0px !important; line-height: 26px; widows: 1; background-color: rgb(231, 229, 220);"><div style="padding-left: 45px;"><div style="padding: 3px 8px 10px 10px; font-size: 9px; line-height: normal; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; border-left-width: 3px; border-left-style: solid; border-left-color: rgb(108, 226, 108); background-color: rgb(248, 248, 248);"><b>[java]</b> <a href="http://blog.csdn.net/xb12369/article/details/45716665#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_plain.gif); background-color: inherit; background-position: 0% 0%; background-repeat: no-repeat no-repeat;" title="view plain">view plain</a><a href="http://blog.csdn.net/xb12369/article/details/45716665#" style="color: rgb(160, 160, 160); text-decoration: none; border: none; padding: 1px; margin: 0px 10px 0px 0px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px; background-image: url(http://static.blog.csdn.net/scripts/SyntaxHighlighter/styles/images/default/ico_copy.gif); background-color: inherit; background-position: 0% 0%; background-repeat: no-repeat no-repeat;" title="copy">copy</a></div></div><ol start="1" style="margin: 0px 0px 1px 45px !important; padding: 0px; border: none; list-style-position: initial; list-style-image: initial; color: rgb(92, 92, 92); background-color: rgb(255, 255, 255);"><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;"><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">&gt;&gt;&gt;模拟微信支付&lt;&lt;&lt;  </span></span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">==========华丽的分隔符==========  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">微信的签名是：9A0A8659F005D6984697E2CA0A9CF3B7  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">我     的签名是：9A0A8659F005D6984697E2CA0A9CF3B7  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; color: inherit; line-height: 18px;"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">恭喜你成功了~  </span></li><li style="margin: 0px !important; padding: 0px 3px 0px 10px !important; border-top-style: none; border-right-style: none; border-bottom-style: none; border-left-style: solid; border-left-width: 3px; border-left-color: rgb(108, 226, 108); list-style: decimal-leading-zero outside; line-height: 18px; background-color: rgb(248, 248, 248);"><span style="margin: 0px; padding: 0px; border: none; color: black; background-color: inherit;">微信的版本号：<span style="margin: 0px; padding: 0px; border: none; color: rgb(192, 0, 0); background-color: inherit;">5</span><span style="margin: 0px; padding: 0px; border: none; background-color: inherit;">  </span></span></li></ol></div></span>
</div></body></html> 